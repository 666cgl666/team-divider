# 团队分组游戏

一个部署在Cloudflare上的多人在线团队分组游戏。

## 功能特性

- 🎯 **简单易用**：输入名字即可加入游戏
- 👥 **10人游戏**：需要凑齐10人才能开始分队
- 🕵️ **内鬼机制**：随机选择4个内鬼，每队2个
- 🔄 **自动分队**：智能分配确保公平性
- 📱 **响应式设计**：支持手机和桌面端
- 🍪 **记住名字**：使用Cookie记住用户名字
- ⏳ **等待队列**：超过10人时自动排队

## 游戏流程

1. **输入名字**：首次使用需要输入名字，之后会自动记住
2. **加入房间**：点击加入房间按钮进入等待大厅
3. **等待玩家**：显示当前人数，需要10人才能开始
4. **自动分队**：10人满员后自动分成两队，每队5人
5. **查看结果**：显示队友名单，内鬼知道自己身份
6. **重新开始**：30秒后房间重置，可以开始新一轮

## 技术栈

- **前端**：Next.js 15 + TypeScript + Tailwind CSS
- **后端**：Next.js API Routes
- **部署**：Cloudflare Pages
- **状态管理**：内存存储（生产环境建议使用Durable Objects）

## 本地开发

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 访问 http://localhost:3000
```

## 部署到Cloudflare

1. **构建项目**
```bash
npm run build
```

2. **部署到Cloudflare Pages**
```bash
# 如果还没有安装wrangler
npm install -g wrangler

# 登录Cloudflare
wrangler login

# 部署
wrangler pages deploy out
```

## 游戏规则

- 10个玩家随机分成两队（每队5人）
- 随机选择4个"内鬼"（每队2个）
- 只有内鬼知道自己的身份
- 所有人都能看到自己队伍的成员
- 游戏结束后房间自动重置

## 特殊功能

### 重名处理
如果有重复的名字，系统会自动添加数字后缀：
- 张三
- 张三2
- 张三3

### 等待队列
当房间满员（10人）时，新加入的玩家会进入等待队列，当前游戏结束后自动进入下一轮。

### Cookie记忆
系统会记住用户的名字30天，下次访问时无需重新输入。

## API接口

### GET /api/room
获取当前房间状态

### POST /api/room
- `action: "join"` - 加入房间
- `action: "leave"` - 离开房间

## 注意事项

- 当前使用内存存储，服务器重启会丢失数据
- 生产环境建议使用Cloudflare Durable Objects持久化状态
- 支持多个等待队列，但同时只能有一个活跃游戏房间

## 许可证

MIT License
